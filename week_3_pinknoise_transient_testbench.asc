Version 4
SHEET 1 5680 2344
WIRE 1968 -368 1920 -368
WIRE 2048 -368 1968 -368
WIRE 2048 -272 2048 -368
WIRE 608 -256 560 -256
WIRE 688 -256 608 -256
WIRE 2016 -256 1872 -256
WIRE 2256 -240 2080 -240
WIRE 2528 -240 2256 -240
WIRE 2704 -240 2528 -240
WIRE 2944 -240 2768 -240
WIRE 3024 -240 2944 -240
WIRE 2016 -224 1984 -224
WIRE 3024 -224 3024 -240
WIRE -1360 -208 -1424 -208
WIRE -1248 -208 -1360 -208
WIRE -816 -208 -880 -208
WIRE -704 -208 -816 -208
WIRE -2208 -192 -2288 -192
WIRE -2144 -192 -2208 -192
WIRE 1984 -192 1984 -224
WIRE -1248 -160 -1248 -208
WIRE -704 -160 -704 -208
WIRE 688 -160 688 -256
WIRE -2288 -144 -2288 -192
WIRE -2112 -144 -2288 -144
WIRE 1200 -128 720 -128
WIRE 1536 -128 1200 -128
WIRE 1872 -128 1872 -256
WIRE 1872 -128 1760 -128
WIRE -336 -112 -480 -112
WIRE -128 -112 -336 -112
WIRE 192 -112 -48 -112
WIRE 656 -112 192 -112
WIRE 2048 -112 2048 -208
WIRE 2128 -112 2048 -112
WIRE 2176 -112 2128 -112
WIRE -2112 -96 -2112 -144
WIRE 3024 -64 3024 -144
WIRE 3168 -64 3024 -64
WIRE 3216 -64 3168 -64
WIRE -2288 -48 -2288 -144
WIRE -1360 -32 -1408 -32
WIRE -1248 -32 -1248 -80
WIRE -1248 -32 -1360 -32
WIRE -832 -32 -896 -32
WIRE -704 -32 -704 -80
WIRE -704 -32 -832 -32
WIRE 3024 -16 3024 -64
WIRE -1248 0 -1248 -32
WIRE -704 0 -704 -32
WIRE 688 0 688 -96
WIRE 768 0 688 0
WIRE 816 0 768 0
WIRE -480 16 -480 -112
WIRE -368 32 -432 32
WIRE -352 32 -368 32
WIRE -384 80 -432 80
WIRE -2288 128 -2288 32
WIRE -2288 128 -2384 128
WIRE -2112 128 -2112 -32
WIRE -2112 128 -2288 128
WIRE -1248 144 -1248 80
WIRE -704 144 -704 80
WIRE -480 160 -480 96
WIRE -384 160 -384 80
WIRE 3024 160 3024 64
WIRE -2384 176 -2384 128
WIRE -1312 192 -1424 192
WIRE -2112 224 -2112 128
WIRE -2288 240 -2288 128
WIRE -2288 368 -2288 320
WIRE -2112 368 -2112 288
WIRE -2112 368 -2288 368
WIRE -1488 400 -1552 400
WIRE -1424 400 -1424 192
WIRE -1424 400 -1488 400
WIRE -768 400 -832 400
WIRE -704 400 -704 224
WIRE -704 400 -768 400
WIRE -2288 432 -2288 368
WIRE -2208 432 -2288 432
WIRE -2144 432 -2208 432
WIRE 1872 1120 1872 -128
WIRE 2256 1120 2256 -240
FLAG 2528 -240 vout1
FLAG 1984 -192 0
FLAG 1968 -368 vcc_pos
FLAG 2128 -112 vee_neg
FLAG -2384 176 0
FLAG -2208 -192 vcc_pos
FLAG -2208 432 vee_neg
FLAG -1360 -208 vcc_pos
FLAG -1488 400 vee_neg
FLAG -816 -208 vcc_pos
FLAG -768 400 vee_neg
FLAG -336 -112 vprenoise
FLAG -832 -32 ve_model
FLAG -480 160 0
FLAG -384 160 0
FLAG -368 32 ve_model
FLAG 608 -256 vcc_pos
FLAG 768 0 vee_neg
FLAG 192 -112 vpostnoise
FLAG 3024 160 0
FLAG 1200 -128 vout2
FLAG 3168 -64 vout
FLAG 2944 -240 vout0
FLAG -1360 -32 ve
SYMBOL voltage -2288 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {supply_op}
SYMBOL voltage -2288 224 R0
SYMATTR InstName V2
SYMATTR Value {supply_op}
SYMBOL npn -1312 240 M180
SYMATTR InstName Q1
SYMATTR Value ""
SYMBOL res -1264 -176 R0
SYMATTR InstName R5
SYMATTR Value {r6_op}
SYMBOL voltage -1248 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL cap -2128 -96 R0
WINDOW 3 24 36 Left 2
SYMATTR Value {cdecouple_op}
SYMATTR InstName C5
SYMBOL cap -2128 224 R0
WINDOW 3 24 36 Left 2
SYMATTR Value {cdecouple_op}
SYMATTR InstName C6
SYMBOL res -720 -176 R0
SYMATTR InstName R6
SYMATTR Value {r6_op}
SYMBOL voltage -704 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL res -720 128 R0
SYMATTR InstName R7
SYMATTR Value {r8_op}
SYMBOL e -480 0 M0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL cap 2768 -256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 65 29 VBottom 2
SYMATTR InstName C8
SYMATTR Value {cdcblock_op}
SYMBOL res 3008 -32 R0
SYMATTR InstName R10
SYMATTR Value {rtot_op*(w_op**3.322)}
SYMBOL res 3008 -240 R0
SYMATTR InstName R11
SYMATTR Value {rtot_op*(1-w_op**3.322)}
SYMBOL voltage -32 -112 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V5
SYMATTR Value wavefile="white_python.wav" chan=0
TEXT 2592 -752 Left 2 !.options plotwinsize=0 numdgt=15 measdgt=15\n;.op\n.tran 0 {tstop} {tstart} {1/fs_op}
TEXT 3744 -712 Left 2 !;you can opt to save only specific data, such as the output only; comment this out if you want everything saved, but note that \n;the size of the raw file might be quite large, which could negatively affect performance on your machine:\n;.save V(vout) V(vout2) V(vout1) V(vout0)\n;once you have your data, be sure to comment these out or save to a file that you don't care whether or not it gets overwritten\n;.wave pn_5sec_data.wav 16 50k V(vout)\n;.wave pn_5sec_recycle.wav 16 50k V(vout)
TEXT 3744 -920 Left 2 ;Syntax:  .wave <filename.wav> <Nbits>  <SampleRate> V(out) [V(out2) ...]\n--> note that .wav file doesn't get generated unless .tran simulation is specified\nsee this link for more details on .wav files in LTSpice:\nhttps://ltwiki.org/LTspiceHelp/LTspiceHelp/_WAVE_Write_selected_nodes_to_a_wav_file_.htm
TEXT -2744 1264 Left 2 !; paste your npn model below and be sure to point Q1 to this model\n.model <put your model here; check online for expected format; ask me for help if you don't know what to do>
TEXT -2144 -96 Left 2 ;+
TEXT -2144 232 Left 2 ;+
TEXT -1664 -320 Left 2 ;the spice transistor model does not \nsupport base-emitter reverse breakdown
TEXT -896 -360 Left 2 ;use this voltage divider\nmodel to set the ve DC\nbias voltage instead!\nyou don't need to build this!
TEXT 3600 32 Left 2 !;set cdcblock_op to whatever value you are using for this\n.param cdcblock_op=\n;set rtot_op to whatever total pot resistance you are using\n.param rtot_op=\n;set the pot "wiper" setting below\n;.param w_op=0.0500\n.param w_op=0.5000\n;.param w_op=0.9500
TEXT 3600 328 Left 2 ;adjust w_op; keep rtot_op fixed!\nw_op is the pot "wiper" setting;\nhigher w_op, higher vout;\nw_op constraint: 0 < w_op < 1\nthat is:\nw_op needs to be between 0 and 1,\nwhich means that\nw_op cannot be set to exactly 0, \nand\nw_op cannot be set to exactly 1
TEXT 2448 232 Left 2 ;Audio/logarithmic taper Type A potentiometer ("pot");\n \nYou should choose the total pot resistance to be whatever you \nneed it to be;\n \nI don't recommend linear taper Type B pots; the pot for this \nproject is used for volume control, and Type A is the best choice \n(there are also inverse log taper Type C pots, but I don't recommend \nthose, either; stick to audio/log taper Type A pots for the best results!)\n \nNote that you should either i) ensure that your Type A pot will fit into your\nbreadboard holes directly, OR ii) buy some type of adapter that you can \nplug your pot into and then plug that adapter into your board, OR iii) be\nprepared to solder some wires onto your pot, in this case, I suggest to\nget a pot with solder lugs for the three terminals, fill the solder lug holes\nwith solder first, and then reheat and slide the wires in, making sure to\nkeep the lengths of your wires manageable (not too long, not too short)\n \nHere are some pots (search for Type A on the page, e.g., A10K, etc.) with\nsolder lug for option iii above:\nhttps://lovemyswitches.com/16mm-potentiometers-1-4-smooth-shaft-solder-lug/\nhttps://lovemyswitches.com/16mm-potentiometers-18t-knurled-shaft-solder-lug/
TEXT -560 232 Left 2 ;here, I'm using a unity-gain buffer;\nw/o buffer, there is a small amount\nof noise that shows up at vprenoise;\nmay not be an issue, but I thought \nit looked wonky; you don't need to\nactually build this, it is for simulation\npurposes only
TEXT -1552 472 Left 2 ;emitter-base junction is reverse biased; \ncreates a nice, noisy zener diode;\nthis is in the open-collector configuration
TEXT -1088 -304 Left 2 ;-->
TEXT -856 472 Left 2 ;set parameter ve_op to your target ve value; note that ve=vee_neg+veb,\nwhere veb > 0 is the revese-bias emitter-base voltage of your BJT
TEXT -856 624 Left 2 ;details of voltage divider circuit for emulating the bjt circuit:\nve_model = vee_neg + (R8/(R7 + R8))*(vcc_pos - vee_neg)\n(ve_model - vee_neg)/(vcc_pos - vee_neg)*(R7 + R8) = R8\nalpha*(R7+R8)=R8\nR8=alpha*R7/(1-alpha)
TEXT 736 -256 Left 2 ;place the symbol for the real-world opamp \nyou are using here; feel free to move things \naround, but try to keep your schematic neat
TEXT 472 192 Left 2 ;consider some kind of non-inverting gain stage; this \nis just a suggestion; feel free to come up with your \nown design; you will need to determine the values of \nany resistors (and caps, if you need those) you need \nin your design; and you need to select an actual, real-\nworld opamp (DO NOT use the 100Meg model as we \nhave done in the past); if you decide to use a non-\ninverting gain stage, the south end of the source \nimpedance should be tied to ground, not vee_neg
TEXT -2032 -112 Left 2 ;electrolytic decoupling cap
TEXT -2032 208 Left 2 ;electrolytic decoupling cap
TEXT 2112 -376 Left 2 ;place the symbol for the real-world opamp \nyou are using here; feel free to move things \naround, but try to keep your schematic neat
TEXT 1736 1272 Left 2 ;place your pink noise shaping filter design here; you need\nto select an actual, real-world opamp (DO NOT use the\n100Meg model as we have done in the past); be sure that\nall of your resistors and caps have their values shown on\nthe schematic (this goes for all components in this schematic,\nnot just the ones for the pink noise shaping filter); you also \nneed to determine the DC blocking capacitor value and the\npotentiometer resistance in the output stage; the south end\nend of the potentiometer in the output stage should be tied \nto ground, not vee_neg
TEXT -1208 128 Left 2 ;emitter
TEXT -1408 160 Left 2 ;base
TEXT -1280 288 Left 2 ;collector
TEXT -1376 248 Left 2 ;NPN
TEXT 2664 -320 Left 2 ;DC blocking cap
TEXT -3384 56 Left 2 !;set supply_op to whatever value you are using for this\n.param supply_op=\n;set cdecouple_op to whatever value you are using for this\n.param cdecouple_op=\n;set r6_op to whatever value you are using for this\n.param r6_op=\n;set ve_op to your target ve bias point voltage\n.param ve_op=\n.param alpha={(ve_op+supply_op)/(2*supply_op)}\n.param r8_op={(alpha*r6_op)/(1-alpha)}\n.param fs_op=50k\n.param tstart=1 tstop=6
TEXT -768 -616 Left 2 ;TO BE CLEAR:\nYOU SHOULD NOT BE DESIGNING THE VOLTAGE DIVIDER\nOR THE UNITY-GAIN BUFFER MODELS BELOW; THESE ARE\nMODELS AND ARE FOR SIMULATION PURPOSES ONLY
TEXT -296 -272 Left 2 ;this models reverse-biased emitter-base\njunction, open-collector npn white noise
TEXT 1072 -56 Left 2 ;note your signal amplitude \nhere, e.g., ~1Vp
TEXT 2336 -160 Left 2 ;note your signal amplitude \nhere, e.g., ~2.5Vp
TEXT 1264 -760 Left 2 ;consider using the same type of real-world opamp for both \nthe gain stage and the pink noise shaping filter; you may \neven be able to find a dual package that has the same two\nopamps on one integrated circuit (IC) chip; be sure that any\nopamp chips you buy can be placed into a breadboard easily,\nand the same goes for your other components, too
