Version 4
SHEET 1 5596 2344
WIRE 1984 -288 1936 -288
WIRE 2064 -288 1984 -288
WIRE 2064 -192 2064 -288
WIRE 624 -176 576 -176
WIRE 704 -176 624 -176
WIRE 2032 -176 1888 -176
WIRE 2272 -160 2096 -160
WIRE 2544 -160 2272 -160
WIRE 2720 -160 2544 -160
WIRE 2960 -160 2784 -160
WIRE 3040 -160 2960 -160
WIRE 2032 -144 2000 -144
WIRE 3040 -144 3040 -160
WIRE -1344 -128 -1408 -128
WIRE -1232 -128 -1344 -128
WIRE -800 -128 -864 -128
WIRE -688 -128 -800 -128
WIRE -2192 -112 -2272 -112
WIRE -2128 -112 -2192 -112
WIRE 2000 -112 2000 -144
WIRE -1232 -80 -1232 -128
WIRE -688 -80 -688 -128
WIRE 704 -80 704 -176
WIRE -2272 -64 -2272 -112
WIRE -2096 -64 -2272 -64
WIRE 1216 -48 736 -48
WIRE 1552 -48 1216 -48
WIRE 1888 -48 1888 -176
WIRE 1888 -48 1776 -48
WIRE -320 -32 -464 -32
WIRE -112 -32 -320 -32
WIRE 208 -32 -32 -32
WIRE 672 -32 208 -32
WIRE 2064 -32 2064 -128
WIRE 2144 -32 2064 -32
WIRE 2192 -32 2144 -32
WIRE -2096 -16 -2096 -64
WIRE 3040 16 3040 -64
WIRE 3184 16 3040 16
WIRE 3232 16 3184 16
WIRE -2272 32 -2272 -64
WIRE -1344 48 -1392 48
WIRE -1232 48 -1232 0
WIRE -1232 48 -1344 48
WIRE -816 48 -880 48
WIRE -688 48 -688 0
WIRE -688 48 -816 48
WIRE 3040 64 3040 16
WIRE -1232 80 -1232 48
WIRE -688 80 -688 48
WIRE 704 80 704 -16
WIRE 784 80 704 80
WIRE 832 80 784 80
WIRE -464 96 -464 -32
WIRE -352 112 -416 112
WIRE -336 112 -352 112
WIRE -368 160 -416 160
WIRE -2272 208 -2272 112
WIRE -2272 208 -2368 208
WIRE -2096 208 -2096 48
WIRE -2096 208 -2272 208
WIRE -1232 224 -1232 160
WIRE -688 224 -688 160
WIRE -464 240 -464 176
WIRE -368 240 -368 160
WIRE 3040 240 3040 144
WIRE -2368 256 -2368 208
WIRE -1296 272 -1408 272
WIRE -2096 304 -2096 208
WIRE -2272 320 -2272 208
WIRE -2272 448 -2272 400
WIRE -2096 448 -2096 368
WIRE -2096 448 -2272 448
WIRE -1472 480 -1536 480
WIRE -1408 480 -1408 272
WIRE -1408 480 -1472 480
WIRE -752 480 -816 480
WIRE -688 480 -688 304
WIRE -688 480 -752 480
WIRE -2272 512 -2272 448
WIRE -2192 512 -2272 512
WIRE -2128 512 -2192 512
WIRE 1888 1200 1888 -48
WIRE 2272 1200 2272 -160
FLAG 2544 -160 vout1
FLAG 2000 -112 0
FLAG 1984 -288 vcc_pos
FLAG 2144 -32 vee_neg
FLAG -2368 256 0
FLAG -2192 -112 vcc_pos
FLAG -2192 512 vee_neg
FLAG -1344 -128 vcc_pos
FLAG -1472 480 vee_neg
FLAG -800 -128 vcc_pos
FLAG -752 480 vee_neg
FLAG -320 -32 vprenoise
FLAG -816 48 ve_model
FLAG -464 240 0
FLAG -368 240 0
FLAG -352 112 ve_model
FLAG 624 -176 vcc_pos
FLAG 784 80 vee_neg
FLAG 208 -32 vpostnoise
FLAG 3040 240 0
FLAG 1216 -48 vout2
FLAG 3184 16 vout
FLAG 2960 -160 vout0
FLAG -1344 48 ve
SYMBOL voltage -2272 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {supply_op}
SYMBOL voltage -2272 304 R0
SYMATTR InstName V2
SYMATTR Value {supply_op}
SYMBOL npn -1296 320 M180
SYMATTR InstName Q1
SYMATTR Value ""
SYMBOL res -1248 -96 R0
SYMATTR InstName R1
SYMATTR Value {r6_op}
SYMBOL voltage -1232 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL cap -2112 -16 R0
WINDOW 3 24 36 Left 2
SYMATTR Value {cdecouple_op}
SYMATTR InstName C1
SYMBOL cap -2112 304 R0
WINDOW 3 24 36 Left 2
SYMATTR Value {cdecouple_op}
SYMATTR InstName C2
SYMBOL res -704 -96 R0
SYMATTR InstName R2
SYMATTR Value {r6_op}
SYMBOL voltage -688 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL res -704 208 R0
SYMATTR InstName R3
SYMATTR Value {r8_op}
SYMBOL e -464 80 M0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL cap 2784 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 68 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {cdcblock_op}
SYMBOL res 3024 48 R0
SYMATTR InstName R4
SYMATTR Value {rtot_op*(w_op**3.322)}
SYMBOL res 3024 -160 R0
SYMATTR InstName R5
SYMATTR Value {rtot_op*(1-w_op**3.322)}
SYMBOL voltage -16 -32 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 95 55 VBottom 2
SYMATTR InstName V5
SYMATTR Value 0
SYMATTR Value2 AC 1 0
TEXT 2624 -680 Left 2 !.options plotwinsize=0 numdgt=15 measdgt=15\n;.op\n.ac dec 1000 20 20k
TEXT -3376 176 Left 2 !;set supply_op to whatever value you are using for this\n.param supply_op=\n;set cdecouple_op to whatever value you are using for this\n.param cdecouple_op=\n;set r6_op to whatever value you are using for this\n.param r6_op=\n;set ve_op to your target ve bias point voltage\n.param ve_op=\n.param alpha={(ve_op+supply_op)/(2*supply_op)}\n.param r8_op={(alpha*r6_op)/(1-alpha)}
TEXT -2728 1344 Left 2 !; paste your npn model below and be sure to point Q1 to this model\n.model <put your model here; check online for expected format; ask me for help if you don't know what to do>
TEXT -2128 -16 Left 2 ;+
TEXT -2128 312 Left 2 ;+
TEXT -1648 -240 Left 2 ;the spice transistor model does not \nsupport base-emitter reverse breakdown
TEXT -880 -280 Left 2 ;use this voltage divider\nmodel to set the ve DC\nbias voltage instead!\nyou don't need to build this!
TEXT 3616 112 Left 2 !;set cdcblock_op to whatever value you are using for this\n.param cdcblock_op=\n;set rtot_op to whatever total pot resistance you are using\n.param rtot_op=\n;set the pot "wiper" setting below\n;.param w_op=0.0500\n.param w_op=0.5000\n;.param w_op=0.9500
TEXT 3616 408 Left 2 ;adjust w_op; keep rtot_op fixed!\nw_op is the pot "wiper" setting;\nhigher w_op, higher vout;\nw_op constraint: 0 < w_op < 1\nthat is:\nw_op needs to be between 0 and 1,\nwhich means that\nw_op cannot be set to exactly 0, \nand\nw_op cannot be set to exactly 1
TEXT 2464 312 Left 2 ;Audio/logarithmic taper Type A potentiometer ("pot");\n \nYou should choose the total pot resistance to be whatever you \nneed it to be;\n \nI don't recommend linear taper Type B pots; the pot for this \nproject is used for volume control, and Type A is the best choice \n(there are also inverse log taper Type C pots, but I don't recommend \nthose, either; stick to audio/log taper Type A pots for the best results!)\n \nNote that you should either i) ensure that your Type A pot will fit into your\nbreadboard holes directly, OR ii) buy some type of adapter that you can \nplug your pot into and then plug that adapter into your board, OR iii) be\nprepared to solder some wires onto your pot, in this case, I suggest to\nget a pot with solder lugs for the three terminals, fill the solder lug holes\nwith solder first, and then reheat and slide the wires in, making sure to\nkeep the lengths of your wires manageable (not too long, not too short)\n \nHere are some pots (search for Type A on the page, e.g., A10K, etc.) with\nsolder lug for option iii above:\nhttps://lovemyswitches.com/16mm-potentiometers-1-4-smooth-shaft-solder-lug/\nhttps://lovemyswitches.com/16mm-potentiometers-18t-knurled-shaft-solder-lug/
TEXT -544 312 Left 2 ;here, I'm using a unity-gain buffer;\nw/o buffer, there is a small amount\nof noise that shows up at vprenoise;\nmay not be an issue, but I thought \nit looked wonky; you don't need to\nactually build this, it is for simulation\npurposes only
TEXT -1536 552 Left 2 ;emitter-base junction is reverse biased; \ncreates a nice, noisy zener diode;\nthis is in the open-collector configuration
TEXT -1072 -224 Left 2 ;-->
TEXT -840 552 Left 2 ;set parameter ve_op to your target ve value; note that ve=vee_neg+veb,\nwhere veb > 0 is the revese-bias emitter-base voltage of your BJT
TEXT -840 704 Left 2 ;details of voltage divider circuit for emulating the bjt circuit:\nve_model = vee_neg + (R8/(R7 + R8))*(vcc_pos - vee_neg)\n(ve_model - vee_neg)/(vcc_pos - vee_neg)*(R7 + R8) = R8\nalpha*(R7+R8)=R8\nR8=alpha*R7/(1-alpha)
TEXT 752 -176 Left 2 ;place the symbol for the real-world opamp \nyou are using here; feel free to move things \naround, but try to keep your schematic neat
TEXT 488 272 Left 2 ;consider some kind of non-inverting gain stage; this \nis just a suggestion; feel free to come up with your \nown design; you will need to determine the values of \nany resistors (and caps, if you need those) you need \nin your design; and you need to select an actual, real-\nworld opamp (DO NOT use the 100Meg model as we \nhave done in the past); if you decide to use a non-\ninverting gain stage, the south end of the source \nimpedance should be tied to ground, not vee_neg
TEXT -2016 -32 Left 2 ;electrolytic decoupling cap
TEXT -2016 288 Left 2 ;electrolytic decoupling cap
TEXT 2128 -296 Left 2 ;place the symbol for the real-world opamp \nyou are using here; feel free to move things \naround, but try to keep your schematic neat
TEXT 1752 1352 Left 2 ;place your pink noise shaping filter design here; you need\nto select an actual, real-world opamp (DO NOT use the\n100Meg model as we have done in the past); be sure that\nall of your resistors and caps have their values shown on\nthe schematic (this goes for all components in this schematic,\nnot just the ones for the pink noise shaping filter); you also \nneed to determine the DC blocking capacitor value and the\npotentiometer total resistance in the output stage; the south \nend of the potentiometer in the output stage should be tied \nto ground, not vee_neg
TEXT -1192 208 Left 2 ;emitter
TEXT -1392 240 Left 2 ;base
TEXT -1264 368 Left 2 ;collector
TEXT -1360 328 Left 2 ;NPN
TEXT 2680 -240 Left 2 ;DC blocking cap
TEXT -752 -536 Left 2 ;TO BE CLEAR:\nYOU SHOULD NOT BE DESIGNING THE VOLTAGE DIVIDER\nOR THE UNITY-GAIN BUFFER MODELS BELOW; THESE ARE\nMODELS AND ARE FOR SIMULATION PURPOSES ONLY
TEXT 1280 -680 Left 2 ;consider using the same type of real-world opamp for both \nthe gain stage and the pink noise shaping filter; you may \neven be able to find a dual package that has the same two\nopamps on one integrated circuit (IC) chip; be sure that any\nopamp chips you buy can be placed into a breadboard easily,\nand the same goes for your other components, too
